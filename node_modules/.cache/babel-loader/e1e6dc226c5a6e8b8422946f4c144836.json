{"remainingRequest":"G:\\IdeaProjects\\LastTerminal\\Front\\online-hospital-ui\\node_modules\\babel-loader\\lib\\index.js!G:\\IdeaProjects\\LastTerminal\\Front\\online-hospital-ui\\node_modules\\eslint-loader\\index.js??ref--13-0!G:\\IdeaProjects\\LastTerminal\\Front\\online-hospital-ui\\src\\store\\modules\\user.js","dependencies":[{"path":"G:\\IdeaProjects\\LastTerminal\\Front\\online-hospital-ui\\src\\store\\modules\\user.js","mtime":1603868723751},{"path":"G:\\IdeaProjects\\LastTerminal\\Front\\online-hospital-ui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"G:\\IdeaProjects\\LastTerminal\\Front\\online-hospital-ui\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"G:\\IdeaProjects\\LastTerminal\\Front\\online-hospital-ui\\node_modules\\eslint-loader\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZnVuY3Rpb24ubmFtZSI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC50by1zdHJpbmciOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcudHJpbSI7CmltcG9ydCB7IGxvZ2luIGFzIF9sb2dpbiwgbG9nb3V0IGFzIF9sb2dvdXQsIGdldEluZm8gYXMgX2dldEluZm8gfSBmcm9tICdAL2FwaS91c2VyJzsKaW1wb3J0IHsgZ2V0VG9rZW4sIHNldFRva2VuLCByZW1vdmVUb2tlbiB9IGZyb20gJ0AvdXRpbHMvYXV0aCc7IC8vIGltcG9ydCByb3V0ZXIsIHsgcmVzZXRSb3V0ZXIgfSBmcm9tICdAL3JvdXRlcicKCmltcG9ydCB7IHJlc2V0Um91dGVyIH0gZnJvbSAnQC9yb3V0ZXInOwp2YXIgc3RhdGUgPSB7CiAgdG9rZW46IGdldFRva2VuKCksCiAgbmFtZTogJycsCiAgYXZhdGFyOiAnJywKICAvLyBpbnRyb2R1Y3Rpb246ICcnLAogIHJvbGVzOiBbXSwKICBwZXJtaXNzaW9uczogW10KfTsKdmFyIG11dGF0aW9ucyA9IHsKICBTRVRfVE9LRU46IGZ1bmN0aW9uIFNFVF9UT0tFTihzdGF0ZSwgdG9rZW4pIHsKICAgIHN0YXRlLnRva2VuID0gdG9rZW47CiAgfSwKICAvLyBTRVRfSU5UUk9EVUNUSU9OOiAoc3RhdGUsIGludHJvZHVjdGlvbikgPT4gewogIC8vICAgc3RhdGUuaW50cm9kdWN0aW9uID0gaW50cm9kdWN0aW9uCiAgLy8gfSwKICBTRVRfTkFNRTogZnVuY3Rpb24gU0VUX05BTUUoc3RhdGUsIG5hbWUpIHsKICAgIHN0YXRlLm5hbWUgPSBuYW1lOwogIH0sCiAgU0VUX0FWQVRBUjogZnVuY3Rpb24gU0VUX0FWQVRBUihzdGF0ZSwgYXZhdGFyKSB7CiAgICBzdGF0ZS5hdmF0YXIgPSBhdmF0YXI7CiAgfSwKICBTRVRfUk9MRVM6IGZ1bmN0aW9uIFNFVF9ST0xFUyhzdGF0ZSwgcm9sZXMpIHsKICAgIHN0YXRlLnJvbGVzID0gcm9sZXM7CiAgfSwKICBTRVRfUEVSTUlTU0lPTlM6IGZ1bmN0aW9uIFNFVF9QRVJNSVNTSU9OUyhzdGF0ZSwgcGVybWlzc2lvbnMpIHsKICAgIHN0YXRlLnBlcm1pc3Npb25zID0gcGVybWlzc2lvbnM7CiAgfQp9Owp2YXIgYWN0aW9ucyA9IHsKICAvLyDnlKjmiLfnmbvlvZUKICBsb2dpbjogZnVuY3Rpb24gbG9naW4oX3JlZiwgdXNlckluZm8pIHsKICAgIHZhciBjb21taXQgPSBfcmVmLmNvbW1pdDsKICAgIC8vIOS7jnVzZXJJbmZv5Lit5Y+W5Ye655So5oi35ZCN5ZKM5a+G56CBCiAgICB2YXIgdXNlcm5hbWUgPSB1c2VySW5mby51c2VybmFtZSwKICAgICAgICBwYXNzd29yZCA9IHVzZXJJbmZvLnBhc3N3b3JkOwogICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHsKICAgICAgLy8g6LCD55SoYXBpL3VzZXIuanPkuK3nmoTmlrnms5XvvIzlkJHlkI7nq6/lj5HpgIHor7fmsYIKICAgICAgX2xvZ2luKHsKICAgICAgICB1c2VybmFtZTogdXNlcm5hbWUudHJpbSgpLAogICAgICAgIHBhc3N3b3JkOiBwYXNzd29yZAogICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgIC8vIOWTjeW6lOaVsOaNruagvOW8j+agueaNrllBcGnmnaXnnIvvvIzkuI7ljp/mnaXkuI3lkIzkuoYKICAgICAgICB2YXIgdG9rZW4gPSByZXNwb25zZS50b2tlbjsgLy8g55m75b2V5oiQ5Yqf5ZCO77yM5LuO5ZON5bqU5pWw5o2u5Lit6I635Y+WdG9rZW7vvIzkv53lrZjliLBWdWV45LitCiAgICAgICAgLy8gY29tbWl06LCD55So5LqGbXV0YXRpb25z5Lit55qEU0VUX1RPS0VO5pa55rOV5L+d5a2Y5LqGdG9rZW7kv6Hmga8KCiAgICAgICAgY29tbWl0KCdTRVRfVE9LRU4nLCB0b2tlbik7CiAgICAgICAgc2V0VG9rZW4odG9rZW4pOwogICAgICAgIHJlc29sdmUoKTsKICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycm9yKSB7CiAgICAgICAgcmVqZWN0KGVycm9yKTsKICAgICAgfSk7CiAgICB9KTsKICB9LAogIC8vIOiOt+WPlueUqOaIt+S/oeaBrwogIGdldEluZm86IGZ1bmN0aW9uIGdldEluZm8oX3JlZjIpIHsKICAgIHZhciBjb21taXQgPSBfcmVmMi5jb21taXQsCiAgICAgICAgc3RhdGUgPSBfcmVmMi5zdGF0ZTsKICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7CiAgICAgIF9nZXRJbmZvKHN0YXRlLnRva2VuKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgIC8vIGNvbnN0IHsgZGF0YSB9ID0gcmVzcG9uc2UKICAgICAgICAvLyBpZiAoIWRhdGEpIHsKICAgICAgICAvLyAgIHJlamVjdCgnVmVyaWZpY2F0aW9uIGZhaWxlZCwgcGxlYXNlIExvZ2luIGFnYWluLicpCiAgICAgICAgLy8gfQogICAgICAgIHZhciB1c2VybmFtZSA9IHJlc3BvbnNlLnVzZXJuYW1lLAogICAgICAgICAgICBwaWN0dXJlID0gcmVzcG9uc2UucGljdHVyZSwKICAgICAgICAgICAgcm9sZXMgPSByZXNwb25zZS5yb2xlcywKICAgICAgICAgICAgcGVybWlzc2lvbnMgPSByZXNwb25zZS5wZXJtaXNzaW9uczsgLy8gcm9sZXMgbXVzdCBiZSBhIG5vbi1lbXB0eSBhcnJheQogICAgICAgIC8vIGlmICghcm9sZXMgfHwgcm9sZXMubGVuZ3RoIDw9IDApIHsKICAgICAgICAvLyAgIHJlamVjdCgnZ2V0SW5mbzogcm9sZXMgbXVzdCBiZSBhIG5vbi1udWxsIGFycmF5IScpCiAgICAgICAgLy8gfQoKICAgICAgICBpZiAoIXVzZXJuYW1lKSB7CiAgICAgICAgICByZWplY3QoJ+eUqOaIt+WQjeS4uuepuu+8jOivt+mHjeaWsOeZu+W9lSEnKTsKICAgICAgICB9IC8vIOiOt+WPluinkuiJsgoKCiAgICAgICAgY29tbWl0KCdTRVRfUk9MRVMnLCByb2xlcyk7IC8vIOiOt+WPlueUqOaIt+WQjQoKICAgICAgICBjb21taXQoJ1NFVF9OQU1FJywgdXNlcm5hbWUpOyAvLyDojrflj5blpLTlg48KCiAgICAgICAgY29tbWl0KCdTRVRfQVZBVEFSJywgcGljdHVyZSk7IC8vIOiOt+WPluadg+mZkAoKICAgICAgICBjb21taXQoJ1NFVF9QRVJNSVNTSU9OUycsIHBlcm1pc3Npb25zKTsgLy8g6I635Y+W5LuL57uNCiAgICAgICAgLy8gY29tbWl0KCdTRVRfSU5UUk9EVUNUSU9OJywgaW50cm9kdWN0aW9uKQoKICAgICAgICByZXNvbHZlKHJlc3BvbnNlKTsKICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycm9yKSB7CiAgICAgICAgcmVqZWN0KGVycm9yKTsKICAgICAgfSk7CiAgICB9KTsKICB9LAogIC8vIOmAgOWHuueZu+W9lQogIGxvZ291dDogZnVuY3Rpb24gbG9nb3V0KF9yZWYzKSB7CiAgICB2YXIgY29tbWl0ID0gX3JlZjMuY29tbWl0LAogICAgICAgIHN0YXRlID0gX3JlZjMuc3RhdGUsCiAgICAgICAgZGlzcGF0Y2ggPSBfcmVmMy5kaXNwYXRjaDsKICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7CiAgICAgIF9sb2dvdXQoc3RhdGUudG9rZW4pLnRoZW4oZnVuY3Rpb24gKCkgewogICAgICAgIC8vIOa4heepuuS6hnRva2Vu5L+h5oGv77yI5ZyoVnVleOS4re+8iQogICAgICAgIGNvbW1pdCgnU0VUX1RPS0VOJywgJycpOyAvLyDmuIXnqbrkuobop5LoibLkv6Hmga/vvIjlnKhWdWV45Lit77yJCgogICAgICAgIGNvbW1pdCgnU0VUX1JPTEVTJywgW10pOyAvLyDmuIXnqbrmnYPpmZAKCiAgICAgICAgY29tbWl0KCdTRVRfUEVSTUlTU0lPTlMnLCBbXSk7IC8vIOWIoOmZpHRva2VuCgogICAgICAgIHJlbW92ZVRva2VuKCk7IC8vIOmHjee9rui3r+eUsQoKICAgICAgICByZXNldFJvdXRlcigpOyAvLyByZXNldCB2aXNpdGVkIHZpZXdzIGFuZCBjYWNoZWQgdmlld3MKICAgICAgICAvLyB0byBmaXhlZCBodHRwczovL2dpdGh1Yi5jb20vUGFuSmlhQ2hlbi92dWUtZWxlbWVudC1hZG1pbi9pc3N1ZXMvMjQ4NQoKICAgICAgICBkaXNwYXRjaCgndGFnc1ZpZXcvZGVsQWxsVmlld3MnLCBudWxsLCB7CiAgICAgICAgICByb290OiB0cnVlCiAgICAgICAgfSk7CiAgICAgICAgcmVzb2x2ZSgpOwogICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyb3IpIHsKICAgICAgICByZWplY3QoZXJyb3IpOwogICAgICB9KTsKICAgIH0pOwogIH0sCiAgLy8gcmVtb3ZlIHRva2VuCiAgcmVzZXRUb2tlbjogZnVuY3Rpb24gcmVzZXRUb2tlbihfcmVmNCkgewogICAgdmFyIGNvbW1pdCA9IF9yZWY0LmNvbW1pdDsKICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSkgewogICAgICAvLyDmuIXnqbp0b2tlbgogICAgICBjb21taXQoJ1NFVF9UT0tFTicsICcnKTsgLy8g5riF56m66KeS6ImyCgogICAgICBjb21taXQoJ1NFVF9ST0xFUycsIFtdKTsgLy8g5riF56m65p2D6ZmQCgogICAgICBjb21taXQoJ1NFVF9QRVJNSVNTSU9OUycsIFtdKTsKICAgICAgcmVtb3ZlVG9rZW4oKTsKICAgICAgcmVzb2x2ZSgpOwogICAgfSk7CiAgfSAvLyDliqjmgIHmlLnlj5jmnYPpmZAKICAvLyBhc3luYyBjaGFuZ2VSb2xlcyh7IGNvbW1pdCwgZGlzcGF0Y2ggfSwgcm9sZSkgewogIC8vICAgY29uc3QgdG9rZW4gPSByb2xlICsgJy10b2tlbicKICAvLwogIC8vICAgY29tbWl0KCdTRVRfVE9LRU4nLCB0b2tlbikKICAvLyAgIHNldFRva2VuKHRva2VuKQogIC8vCiAgLy8gICBjb25zdCB7IHJvbGVzIH0gPSBhd2FpdCBkaXNwYXRjaCgnZ2V0SW5mbycpCiAgLy8KICAvLyAgIHJlc2V0Um91dGVyKCkKICAvLwogIC8vICAgLy8gZ2VuZXJhdGUgYWNjZXNzaWJsZSByb3V0ZXMgbWFwIGJhc2VkIG9uIHJvbGVzCiAgLy8gICBjb25zdCBhY2Nlc3NSb3V0ZXMgPSBhd2FpdCBkaXNwYXRjaCgncGVybWlzc2lvbi9nZW5lcmF0ZVJvdXRlcycsIHJvbGVzLCB7IHJvb3Q6IHRydWUgfSkKICAvLyAgIC8vIGR5bmFtaWNhbGx5IGFkZCBhY2Nlc3NpYmxlIHJvdXRlcwogIC8vICAgcm91dGVyLmFkZFJvdXRlcyhhY2Nlc3NSb3V0ZXMpCiAgLy8KICAvLyAgIC8vIHJlc2V0IHZpc2l0ZWQgdmlld3MgYW5kIGNhY2hlZCB2aWV3cwogIC8vICAgZGlzcGF0Y2goJ3RhZ3NWaWV3L2RlbEFsbFZpZXdzJywgbnVsbCwgeyByb290OiB0cnVlIH0pCiAgLy8gfQoKfTsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWVzcGFjZWQ6IHRydWUsCiAgc3RhdGU6IHN0YXRlLAogIG11dGF0aW9uczogbXV0YXRpb25zLAogIGFjdGlvbnM6IGFjdGlvbnMKfTs="},{"version":3,"sources":["G:/IdeaProjects/LastTerminal/Front/online-hospital-ui/src/store/modules/user.js"],"names":["login","logout","getInfo","getToken","setToken","removeToken","resetRouter","state","token","name","avatar","roles","permissions","mutations","SET_TOKEN","SET_NAME","SET_AVATAR","SET_ROLES","SET_PERMISSIONS","actions","userInfo","commit","username","password","Promise","resolve","reject","trim","then","response","catch","error","picture","dispatch","root","resetToken","namespaced"],"mappings":"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","sourcesContent":["import { login, logout, getInfo } from '@/api/user'\nimport { getToken, setToken, removeToken } from '@/utils/auth'\n// import router, { resetRouter } from '@/router'\nimport { resetRouter } from '@/router'\n\nconst state = {\n  token: getToken(),\n  name: '',\n  avatar: '',\n  // introduction: '',\n  roles: [],\n  permissions: []\n}\n\nconst mutations = {\n  SET_TOKEN: (state, token) => {\n    state.token = token\n  },\n  // SET_INTRODUCTION: (state, introduction) => {\n  //   state.introduction = introduction\n  // },\n  SET_NAME: (state, name) => {\n    state.name = name\n  },\n  SET_AVATAR: (state, avatar) => {\n    state.avatar = avatar\n  },\n  SET_ROLES: (state, roles) => {\n    state.roles = roles\n  },\n  SET_PERMISSIONS: (state, permissions) => {\n    state.permissions = permissions\n  }\n}\n\nconst actions = {\n  // 用户登录\n  login({ commit }, userInfo) {\n    // 从userInfo中取出用户名和密码\n    const { username, password } = userInfo\n    return new Promise((resolve, reject) => {\n      // 调用api/user.js中的方法，向后端发送请求\n      login({ username: username.trim(), password: password }).then(response => {\n        // 响应数据格式根据YApi来看，与原来不同了\n        const { token } = response\n        // 登录成功后，从响应数据中获取token，保存到Vuex中\n        // commit调用了mutations中的SET_TOKEN方法保存了token信息\n        commit('SET_TOKEN', token)\n        setToken(token)\n        resolve()\n      }).catch(error => {\n        reject(error)\n      })\n    })\n  },\n\n  // 获取用户信息\n  getInfo({ commit, state }) {\n    return new Promise((resolve, reject) => {\n      getInfo(state.token).then(response => {\n        // const { data } = response\n        // if (!data) {\n        //   reject('Verification failed, please Login again.')\n        // }\n        const { username, picture, roles, permissions } = response\n\n        // roles must be a non-empty array\n        // if (!roles || roles.length <= 0) {\n        //   reject('getInfo: roles must be a non-null array!')\n        // }\n        if (!username) {\n          reject('用户名为空，请重新登录!')\n        }\n        // 获取角色\n        commit('SET_ROLES', roles)\n        // 获取用户名\n        commit('SET_NAME', username)\n        // 获取头像\n        commit('SET_AVATAR', picture)\n        // 获取权限\n        commit('SET_PERMISSIONS', permissions)\n        // 获取介绍\n        // commit('SET_INTRODUCTION', introduction)\n        resolve(response)\n      }).catch(error => {\n        reject(error)\n      })\n    })\n  },\n\n  // 退出登录\n  logout({ commit, state, dispatch }) {\n    return new Promise((resolve, reject) => {\n      logout(state.token).then(() => {\n        // 清空了token信息（在Vuex中）\n        commit('SET_TOKEN', '')\n        // 清空了角色信息（在Vuex中）\n        commit('SET_ROLES', [])\n        // 清空权限\n        commit('SET_PERMISSIONS', [])\n        // 删除token\n        removeToken()\n        // 重置路由\n        resetRouter()\n\n        // reset visited views and cached views\n        // to fixed https://github.com/PanJiaChen/vue-element-admin/issues/2485\n        dispatch('tagsView/delAllViews', null, { root: true })\n\n        resolve()\n      }).catch(error => {\n        reject(error)\n      })\n    })\n  },\n\n  // remove token\n  resetToken({ commit }) {\n    return new Promise(resolve => {\n      // 清空token\n      commit('SET_TOKEN', '')\n      // 清空角色\n      commit('SET_ROLES', [])\n      // 清空权限\n      commit('SET_PERMISSIONS', [])\n      removeToken()\n      resolve()\n    })\n  }\n\n  // 动态改变权限\n  // async changeRoles({ commit, dispatch }, role) {\n  //   const token = role + '-token'\n  //\n  //   commit('SET_TOKEN', token)\n  //   setToken(token)\n  //\n  //   const { roles } = await dispatch('getInfo')\n  //\n  //   resetRouter()\n  //\n  //   // generate accessible routes map based on roles\n  //   const accessRoutes = await dispatch('permission/generateRoutes', roles, { root: true })\n  //   // dynamically add accessible routes\n  //   router.addRoutes(accessRoutes)\n  //\n  //   // reset visited views and cached views\n  //   dispatch('tagsView/delAllViews', null, { root: true })\n  // }\n}\n\nexport default {\n  namespaced: true,\n  state,\n  mutations,\n  actions\n}\n"]}]}