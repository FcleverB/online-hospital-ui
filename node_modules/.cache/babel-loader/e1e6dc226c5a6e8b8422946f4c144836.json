{"remainingRequest":"G:\\IdeaProjects\\LastTerminal\\Front\\online-hospital-ui\\node_modules\\babel-loader\\lib\\index.js!G:\\IdeaProjects\\LastTerminal\\Front\\online-hospital-ui\\node_modules\\eslint-loader\\index.js??ref--13-0!G:\\IdeaProjects\\LastTerminal\\Front\\online-hospital-ui\\src\\store\\modules\\user.js","dependencies":[{"path":"G:\\IdeaProjects\\LastTerminal\\Front\\online-hospital-ui\\src\\store\\modules\\user.js","mtime":1606806190507},{"path":"G:\\IdeaProjects\\LastTerminal\\Front\\online-hospital-ui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"G:\\IdeaProjects\\LastTerminal\\Front\\online-hospital-ui\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"G:\\IdeaProjects\\LastTerminal\\Front\\online-hospital-ui\\node_modules\\eslint-loader\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZnVuY3Rpb24ubmFtZSI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC50by1zdHJpbmciOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcudHJpbSI7CmltcG9ydCB7IGxvZ2luIGFzIF9sb2dpbiwgbG9nb3V0IGFzIF9sb2dvdXQsIGdldEluZm8gYXMgX2dldEluZm8gfSBmcm9tICdAL2FwaS9zeXN0ZW0vbG9naW4vbG9naW4nOwppbXBvcnQgeyBnZXRUb2tlbiwgc2V0VG9rZW4sIHJlbW92ZVRva2VuIH0gZnJvbSAnQC91dGlscy9hdXRoJzsgLy8gaW1wb3J0IHJvdXRlciwgeyByZXNldFJvdXRlciB9IGZyb20gJ0Avcm91dGVyJwoKaW1wb3J0IHsgcmVzZXRSb3V0ZXIgfSBmcm9tICdAL3JvdXRlcic7CnZhciBzdGF0ZSA9IHsKICB0b2tlbjogZ2V0VG9rZW4oKSwKICBuYW1lOiAnJywKICBhdmF0YXI6ICcnLAogIC8vIGludHJvZHVjdGlvbjogJycsCiAgcm9sZXM6IFtdLAogIHBlcm1pc3Npb25zOiBbXQp9Owp2YXIgbXV0YXRpb25zID0gewogIFNFVF9UT0tFTjogZnVuY3Rpb24gU0VUX1RPS0VOKHN0YXRlLCB0b2tlbikgewogICAgc3RhdGUudG9rZW4gPSB0b2tlbjsKICB9LAogIC8vIFNFVF9JTlRST0RVQ1RJT046IChzdGF0ZSwgaW50cm9kdWN0aW9uKSA9PiB7CiAgLy8gICBzdGF0ZS5pbnRyb2R1Y3Rpb24gPSBpbnRyb2R1Y3Rpb24KICAvLyB9LAogIFNFVF9OQU1FOiBmdW5jdGlvbiBTRVRfTkFNRShzdGF0ZSwgbmFtZSkgewogICAgc3RhdGUubmFtZSA9IG5hbWU7CiAgfSwKICBTRVRfQVZBVEFSOiBmdW5jdGlvbiBTRVRfQVZBVEFSKHN0YXRlLCBhdmF0YXIpIHsKICAgIHN0YXRlLmF2YXRhciA9IGF2YXRhcjsKICB9LAogIFNFVF9ST0xFUzogZnVuY3Rpb24gU0VUX1JPTEVTKHN0YXRlLCByb2xlcykgewogICAgc3RhdGUucm9sZXMgPSByb2xlczsKICB9LAogIFNFVF9QRVJNSVNTSU9OUzogZnVuY3Rpb24gU0VUX1BFUk1JU1NJT05TKHN0YXRlLCBwZXJtaXNzaW9ucykgewogICAgc3RhdGUucGVybWlzc2lvbnMgPSBwZXJtaXNzaW9uczsKICB9Cn07CnZhciBhY3Rpb25zID0gewogIC8vIOeUqOaIt+eZu+W9lQogIGxvZ2luOiBmdW5jdGlvbiBsb2dpbihfcmVmLCB1c2VySW5mbykgewogICAgdmFyIGNvbW1pdCA9IF9yZWYuY29tbWl0OwogICAgLy8g5LuOdXNlckluZm/kuK3lj5blh7rnlKjmiLflkI3lkozlr4bnoIEKICAgIHZhciB1c2VybmFtZSA9IHVzZXJJbmZvLnVzZXJuYW1lLAogICAgICAgIHBhc3N3b3JkID0gdXNlckluZm8ucGFzc3dvcmQ7CiAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkgewogICAgICAvLyDosIPnlKhhcGkvdXNlci5qc+S4reeahOaWueazle+8jOWQkeWQjuerr+WPkemAgeivt+axggogICAgICBfbG9naW4oewogICAgICAgIHVzZXJuYW1lOiB1c2VybmFtZS50cmltKCksCiAgICAgICAgcGFzc3dvcmQ6IHBhc3N3b3JkCiAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgLy8g5ZON5bqU5pWw5o2u5qC85byP5qC55o2uWUFwaeadpeeci++8jOS4juWOn+adpeS4jeWQjOS6hgogICAgICAgIHZhciB0b2tlbiA9IHJlc3BvbnNlLnRva2VuOyAvLyDnmbvlvZXmiJDlip/lkI7vvIzku47lk43lupTmlbDmja7kuK3ojrflj5Z0b2tlbu+8jOS/neWtmOWIsFZ1ZXjkuK0KICAgICAgICAvLyBjb21taXTosIPnlKjkuoZtdXRhdGlvbnPkuK3nmoRTRVRfVE9LRU7mlrnms5Xkv53lrZjkuoZ0b2tlbuS/oeaBrwoKICAgICAgICBjb21taXQoJ1NFVF9UT0tFTicsIHRva2VuKTsKICAgICAgICBzZXRUb2tlbih0b2tlbik7CiAgICAgICAgcmVzb2x2ZSgpOwogICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyb3IpIHsKICAgICAgICByZWplY3QoZXJyb3IpOwogICAgICB9KTsKICAgIH0pOwogIH0sCiAgLy8g6I635Y+W55So5oi35L+h5oGvCiAgZ2V0SW5mbzogZnVuY3Rpb24gZ2V0SW5mbyhfcmVmMikgewogICAgdmFyIGNvbW1pdCA9IF9yZWYyLmNvbW1pdCwKICAgICAgICBzdGF0ZSA9IF9yZWYyLnN0YXRlOwogICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHsKICAgICAgX2dldEluZm8oc3RhdGUudG9rZW4pLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgLy8gY29uc3QgeyBkYXRhIH0gPSByZXNwb25zZQogICAgICAgIC8vIGlmICghZGF0YSkgewogICAgICAgIC8vICAgcmVqZWN0KCdWZXJpZmljYXRpb24gZmFpbGVkLCBwbGVhc2UgTG9naW4gYWdhaW4uJykKICAgICAgICAvLyB9CiAgICAgICAgdmFyIHVzZXJuYW1lID0gcmVzcG9uc2UudXNlcm5hbWUsCiAgICAgICAgICAgIHBpY3R1cmUgPSByZXNwb25zZS5waWN0dXJlLAogICAgICAgICAgICByb2xlcyA9IHJlc3BvbnNlLnJvbGVzLAogICAgICAgICAgICBwZXJtaXNzaW9ucyA9IHJlc3BvbnNlLnBlcm1pc3Npb25zOyAvLyByb2xlcyBtdXN0IGJlIGEgbm9uLWVtcHR5IGFycmF5CiAgICAgICAgLy8gaWYgKCFyb2xlcyB8fCByb2xlcy5sZW5ndGggPD0gMCkgewogICAgICAgIC8vICAgcmVqZWN0KCdnZXRJbmZvOiByb2xlcyBtdXN0IGJlIGEgbm9uLW51bGwgYXJyYXkhJykKICAgICAgICAvLyB9CgogICAgICAgIGlmICghdXNlcm5hbWUpIHsKICAgICAgICAgIHJlamVjdCgn55So5oi35ZCN5Li656m677yM6K+36YeN5paw55m75b2VIScpOwogICAgICAgIH0gLy8g6I635Y+W6KeS6ImyCgoKICAgICAgICBjb21taXQoJ1NFVF9ST0xFUycsIHJvbGVzKTsgLy8g6I635Y+W55So5oi35ZCNCgogICAgICAgIGNvbW1pdCgnU0VUX05BTUUnLCB1c2VybmFtZSk7IC8vIOiOt+WPluWktOWDjwoKICAgICAgICBjb21taXQoJ1NFVF9BVkFUQVInLCBwaWN0dXJlKTsgLy8g6I635Y+W5p2D6ZmQCgogICAgICAgIGNvbW1pdCgnU0VUX1BFUk1JU1NJT05TJywgcGVybWlzc2lvbnMpOyAvLyDojrflj5bku4vnu40KICAgICAgICAvLyBjb21taXQoJ1NFVF9JTlRST0RVQ1RJT04nLCBpbnRyb2R1Y3Rpb24pCgogICAgICAgIHJlc29sdmUocmVzcG9uc2UpOwogICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyb3IpIHsKICAgICAgICByZWplY3QoZXJyb3IpOwogICAgICB9KTsKICAgIH0pOwogIH0sCiAgLy8g6YCA5Ye655m75b2VCiAgbG9nb3V0OiBmdW5jdGlvbiBsb2dvdXQoX3JlZjMpIHsKICAgIHZhciBjb21taXQgPSBfcmVmMy5jb21taXQsCiAgICAgICAgc3RhdGUgPSBfcmVmMy5zdGF0ZSwKICAgICAgICBkaXNwYXRjaCA9IF9yZWYzLmRpc3BhdGNoOwogICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHsKICAgICAgX2xvZ291dChzdGF0ZS50b2tlbikudGhlbihmdW5jdGlvbiAoKSB7CiAgICAgICAgLy8g5riF56m65LqGdG9rZW7kv6Hmga/vvIjlnKhWdWV45Lit77yJCiAgICAgICAgY29tbWl0KCdTRVRfVE9LRU4nLCAnJyk7IC8vIOa4heepuuS6huinkuiJsuS/oeaBr++8iOWcqFZ1ZXjkuK3vvIkKCiAgICAgICAgY29tbWl0KCdTRVRfUk9MRVMnLCBbXSk7IC8vIOa4heepuuadg+mZkAoKICAgICAgICBjb21taXQoJ1NFVF9QRVJNSVNTSU9OUycsIFtdKTsgLy8g5Yig6ZmkdG9rZW4KCiAgICAgICAgcmVtb3ZlVG9rZW4oKTsgLy8g6YeN572u6Lev55SxCgogICAgICAgIHJlc2V0Um91dGVyKCk7IC8vIHJlc2V0IHZpc2l0ZWQgdmlld3MgYW5kIGNhY2hlZCB2aWV3cwogICAgICAgIC8vIHRvIGZpeGVkIGh0dHBzOi8vZ2l0aHViLmNvbS9QYW5KaWFDaGVuL3Z1ZS1lbGVtZW50LWFkbWluL2lzc3Vlcy8yNDg1CgogICAgICAgIGRpc3BhdGNoKCd0YWdzVmlldy9kZWxBbGxWaWV3cycsIG51bGwsIHsKICAgICAgICAgIHJvb3Q6IHRydWUKICAgICAgICB9KTsKICAgICAgICByZXNvbHZlKCk7CiAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnJvcikgewogICAgICAgIHJlamVjdChlcnJvcik7CiAgICAgIH0pOwogICAgfSk7CiAgfSwKICAvLyByZW1vdmUgdG9rZW4KICByZXNldFRva2VuOiBmdW5jdGlvbiByZXNldFRva2VuKF9yZWY0KSB7CiAgICB2YXIgY29tbWl0ID0gX3JlZjQuY29tbWl0OwogICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlKSB7CiAgICAgIC8vIOa4heepunRva2VuCiAgICAgIGNvbW1pdCgnU0VUX1RPS0VOJywgJycpOyAvLyDmuIXnqbrop5LoibIKCiAgICAgIGNvbW1pdCgnU0VUX1JPTEVTJywgW10pOyAvLyDmuIXnqbrmnYPpmZAKCiAgICAgIGNvbW1pdCgnU0VUX1BFUk1JU1NJT05TJywgW10pOwogICAgICByZW1vdmVUb2tlbigpOwogICAgICByZXNvbHZlKCk7CiAgICB9KTsKICB9IC8vIOWKqOaAgeaUueWPmOadg+mZkAogIC8vIGFzeW5jIGNoYW5nZVJvbGVzKHsgY29tbWl0LCBkaXNwYXRjaCB9LCByb2xlKSB7CiAgLy8gICBjb25zdCB0b2tlbiA9IHJvbGUgKyAnLXRva2VuJwogIC8vCiAgLy8gICBjb21taXQoJ1NFVF9UT0tFTicsIHRva2VuKQogIC8vICAgc2V0VG9rZW4odG9rZW4pCiAgLy8KICAvLyAgIGNvbnN0IHsgcm9sZXMgfSA9IGF3YWl0IGRpc3BhdGNoKCdnZXRJbmZvJykKICAvLwogIC8vICAgcmVzZXRSb3V0ZXIoKQogIC8vCiAgLy8gICAvLyBnZW5lcmF0ZSBhY2Nlc3NpYmxlIHJvdXRlcyBtYXAgYmFzZWQgb24gcm9sZXMKICAvLyAgIGNvbnN0IGFjY2Vzc1JvdXRlcyA9IGF3YWl0IGRpc3BhdGNoKCdwZXJtaXNzaW9uL2dlbmVyYXRlUm91dGVzJywgcm9sZXMsIHsgcm9vdDogdHJ1ZSB9KQogIC8vICAgLy8gZHluYW1pY2FsbHkgYWRkIGFjY2Vzc2libGUgcm91dGVzCiAgLy8gICByb3V0ZXIuYWRkUm91dGVzKGFjY2Vzc1JvdXRlcykKICAvLwogIC8vICAgLy8gcmVzZXQgdmlzaXRlZCB2aWV3cyBhbmQgY2FjaGVkIHZpZXdzCiAgLy8gICBkaXNwYXRjaCgndGFnc1ZpZXcvZGVsQWxsVmlld3MnLCBudWxsLCB7IHJvb3Q6IHRydWUgfSkKICAvLyB9Cgp9OwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZXNwYWNlZDogdHJ1ZSwKICBzdGF0ZTogc3RhdGUsCiAgbXV0YXRpb25zOiBtdXRhdGlvbnMsCiAgYWN0aW9uczogYWN0aW9ucwp9Ow=="},{"version":3,"sources":["G:/IdeaProjects/LastTerminal/Front/online-hospital-ui/src/store/modules/user.js"],"names":["login","logout","getInfo","getToken","setToken","removeToken","resetRouter","state","token","name","avatar","roles","permissions","mutations","SET_TOKEN","SET_NAME","SET_AVATAR","SET_ROLES","SET_PERMISSIONS","actions","userInfo","commit","username","password","Promise","resolve","reject","trim","then","response","catch","error","picture","dispatch","root","resetToken","namespaced"],"mappings":"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","sourcesContent":["import { login, logout, getInfo } from '@/api/system/login/login'\nimport { getToken, setToken, removeToken } from '@/utils/auth'\n// import router, { resetRouter } from '@/router'\nimport { resetRouter } from '@/router'\n\nconst state = {\n  token: getToken(),\n  name: '',\n  avatar: '',\n  // introduction: '',\n  roles: [],\n  permissions: []\n}\n\nconst mutations = {\n  SET_TOKEN: (state, token) => {\n    state.token = token\n  },\n  // SET_INTRODUCTION: (state, introduction) => {\n  //   state.introduction = introduction\n  // },\n  SET_NAME: (state, name) => {\n    state.name = name\n  },\n  SET_AVATAR: (state, avatar) => {\n    state.avatar = avatar\n  },\n  SET_ROLES: (state, roles) => {\n    state.roles = roles\n  },\n  SET_PERMISSIONS: (state, permissions) => {\n    state.permissions = permissions\n  }\n}\n\nconst actions = {\n  // 用户登录\n  login({ commit }, userInfo) {\n    // 从userInfo中取出用户名和密码\n    const { username, password } = userInfo\n    return new Promise((resolve, reject) => {\n      // 调用api/user.js中的方法，向后端发送请求\n      login({ username: username.trim(), password: password }).then(response => {\n        // 响应数据格式根据YApi来看，与原来不同了\n        const { token } = response\n        // 登录成功后，从响应数据中获取token，保存到Vuex中\n        // commit调用了mutations中的SET_TOKEN方法保存了token信息\n        commit('SET_TOKEN', token)\n        setToken(token)\n        resolve()\n      }).catch(error => {\n        reject(error)\n      })\n    })\n  },\n\n  // 获取用户信息\n  getInfo({ commit, state }) {\n    return new Promise((resolve, reject) => {\n      getInfo(state.token).then(response => {\n        // const { data } = response\n        // if (!data) {\n        //   reject('Verification failed, please Login again.')\n        // }\n        const { username, picture, roles, permissions } = response\n\n        // roles must be a non-empty array\n        // if (!roles || roles.length <= 0) {\n        //   reject('getInfo: roles must be a non-null array!')\n        // }\n        if (!username) {\n          reject('用户名为空，请重新登录!')\n        }\n        // 获取角色\n        commit('SET_ROLES', roles)\n        // 获取用户名\n        commit('SET_NAME', username)\n        // 获取头像\n        commit('SET_AVATAR', picture)\n        // 获取权限\n        commit('SET_PERMISSIONS', permissions)\n        // 获取介绍\n        // commit('SET_INTRODUCTION', introduction)\n        resolve(response)\n      }).catch(error => {\n        reject(error)\n      })\n    })\n  },\n\n  // 退出登录\n  logout({ commit, state, dispatch }) {\n    return new Promise((resolve, reject) => {\n      logout(state.token).then(() => {\n        // 清空了token信息（在Vuex中）\n        commit('SET_TOKEN', '')\n        // 清空了角色信息（在Vuex中）\n        commit('SET_ROLES', [])\n        // 清空权限\n        commit('SET_PERMISSIONS', [])\n        // 删除token\n        removeToken()\n        // 重置路由\n        resetRouter()\n\n        // reset visited views and cached views\n        // to fixed https://github.com/PanJiaChen/vue-element-admin/issues/2485\n        dispatch('tagsView/delAllViews', null, { root: true })\n\n        resolve()\n      }).catch(error => {\n        reject(error)\n      })\n    })\n  },\n\n  // remove token\n  resetToken({ commit }) {\n    return new Promise(resolve => {\n      // 清空token\n      commit('SET_TOKEN', '')\n      // 清空角色\n      commit('SET_ROLES', [])\n      // 清空权限\n      commit('SET_PERMISSIONS', [])\n      removeToken()\n      resolve()\n    })\n  }\n\n  // 动态改变权限\n  // async changeRoles({ commit, dispatch }, role) {\n  //   const token = role + '-token'\n  //\n  //   commit('SET_TOKEN', token)\n  //   setToken(token)\n  //\n  //   const { roles } = await dispatch('getInfo')\n  //\n  //   resetRouter()\n  //\n  //   // generate accessible routes map based on roles\n  //   const accessRoutes = await dispatch('permission/generateRoutes', roles, { root: true })\n  //   // dynamically add accessible routes\n  //   router.addRoutes(accessRoutes)\n  //\n  //   // reset visited views and cached views\n  //   dispatch('tagsView/delAllViews', null, { root: true })\n  // }\n}\n\nexport default {\n  namespaced: true,\n  state,\n  mutations,\n  actions\n}\n"]}]}