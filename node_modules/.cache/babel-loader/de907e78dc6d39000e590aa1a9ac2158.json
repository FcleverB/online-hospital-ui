{"remainingRequest":"G:\\IdeaProjects\\LastTerminal\\Front\\online-hospital-ui\\node_modules\\babel-loader\\lib\\index.js!G:\\IdeaProjects\\LastTerminal\\Front\\online-hospital-ui\\node_modules\\eslint-loader\\index.js??ref--13-0!G:\\IdeaProjects\\LastTerminal\\Front\\online-hospital-ui\\src\\utils\\request.js","dependencies":[{"path":"G:\\IdeaProjects\\LastTerminal\\Front\\online-hospital-ui\\src\\utils\\request.js","mtime":1603843441747},{"path":"G:\\IdeaProjects\\LastTerminal\\Front\\online-hospital-ui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"G:\\IdeaProjects\\LastTerminal\\Front\\online-hospital-ui\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"G:\\IdeaProjects\\LastTerminal\\Front\\online-hospital-ui\\node_modules\\eslint-loader\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZyI7CmltcG9ydCBheGlvcyBmcm9tICdheGlvcyc7CmltcG9ydCB7IE1lc3NhZ2VCb3gsIE1lc3NhZ2UgfSBmcm9tICdlbGVtZW50LXVpJzsKaW1wb3J0IHN0b3JlIGZyb20gJ0Avc3RvcmUnOwppbXBvcnQgeyBnZXRUb2tlbiB9IGZyb20gJ0AvdXRpbHMvYXV0aCc7IC8vIOWIm+W7uuS4gOS4qmF4aW9z5a6e5L6LCgp2YXIgc2VydmljZSA9IGF4aW9zLmNyZWF0ZSh7CiAgYmFzZVVSTDogcHJvY2Vzcy5lbnYuVlVFX0FQUF9CQVNFX0FQSSwKICAvLyDlrp7pmYXlj5HpgIHnmoRVUkw9YmFzZVVSTCAgKyAg6K+35rGC6YWN572u55qEdXJsICDvvIhiYXNlVVJM5b2T5YmN5bCx5pivL2Rldi1hcGkKICAvLyB3aXRoQ3JlZGVudGlhbHM6IHRydWUsIC8vIHNlbmQgY29va2llcyB3aGVuIGNyb3NzLWRvbWFpbiByZXF1ZXN0cwogIHRpbWVvdXQ6IDUwMDAgLy8g6K6+572u6K+35rGC6LaF5pe25pe26Ze0Cgp9KTsgLy8g6K+35rGC5oum5oiq5ZmoCgpzZXJ2aWNlLmludGVyY2VwdG9ycy5yZXF1ZXN0LnVzZShmdW5jdGlvbiAoY29uZmlnKSB7CiAgLy8g5Zyo5Y+R6YCB6K+35rGC5LmL5YmN5YGa55qE5LqL5oOFCiAgaWYgKHN0b3JlLmdldHRlcnMudG9rZW4pIHsKICAgIC8vIOiuqeavj+S4gOS4quivt+axguS4remDveaQuuW4pnRva2VuCiAgICAvLyDjgJDigJhYLVRva2Vu4oCZ44CR5piv5LiA5Liq6Ieq5a6a5LmJ55qEaGVhZGVy5Lit55qEa2V5CiAgICAvLyDlj6/ku6XmoLnmja7lrp7pmYXmg4XlhrXmlLnlj5jlroMKICAgIC8vIOi/memHjOeahHRva2Vu5ZCN56ew6KaB5ZKM5ZCO56uv5L+d5oyB5LiA6Ie0CiAgICBjb25maWcuaGVhZGVyc1sndG9rZW4nXSA9IGdldFRva2VuKCk7CiAgfQoKICByZXR1cm4gY29uZmlnOwp9LCBmdW5jdGlvbiAoZXJyb3IpIHsKICAvLyDlvZPor7fmsYLlh7rnjrDpl67popjml7bmiYDlgZrnmoTkuIDkupvkuovmg4UKICBjb25zb2xlLmxvZyhlcnJvcik7IC8vIGZvciBkZWJ1ZwoKICByZXR1cm4gUHJvbWlzZS5yZWplY3QoZXJyb3IpOwp9KTsgLy8g5ZON5bqU5oum5oiq5ZmoCgpzZXJ2aWNlLmludGVyY2VwdG9ycy5yZXNwb25zZS51c2UoCi8qKgogKiDlpoLmnpzkvaDmg7PopoHlvpfliLDor7jlpoLor7fmsYLlpLTmiJbogIXnirbmgIHnmoRodHRw5L+h5oGvCiAqIOivt+i/lOWbniAgcmVzcG9uc2UgPT4gcmVzcG9uc2UKICovCgovKioKICog6YCa6L+H6Ieq5a6a5LmJ56CB5p2l5Yaz5a6a6K+35rGC54q25oCBCiAqIOi/memHjOS7heS7heaYr+S4gOS4quS+i+WtkAogKiDkvaDlkIzmoLfkuZ/lj6/ku6XmoLnmja5odHRw55qE54q25oCB56CB5p2l5Yaz5a6a6L+Z5Liq54q25oCBCiAqIEBwYXJhbSByZXNwb25zZQogKiBAcmV0dXJucyB7YW55fFByb21pc2U8QXhpb3NSZXNwb25zZTxhbnk+Pn0KICovCmZ1bmN0aW9uIChyZXNwb25zZSkgewogIC8qKgogICAqIOmhueebruS4reWtmOWcqOeahOeKtuaAgeeggQogICAqIDQwMO+8muWPguaVsOWtmOWcqOmXrumimAogICAqIDQwMe+8muacquaOiOadgwogICAqIDUwMO+8muezu+e7n+WGhemDqOmUmeivrwogICAqIDIwMO+8muaTjeS9nOaIkOWKnwogICAqLwogIHZhciByZXMgPSByZXNwb25zZS5kYXRhOyAvLyByZXNwb25zZS5kYXRh5omN5piv5ZCO5Y+w6L+U5Zue57uZ5oiR5Lus55qE5pWw5o2uCgogIGlmIChyZXMuY29kZSA9PT0gNDAxKSB7CiAgICAvLyDmnKrmjojmnYPvvIzouqvku73ov4fmnJ8gIOS4gOS4quW8ueWHuuahhgogICAgTWVzc2FnZUJveC5jb25maXJtKCfnlKjmiLfnmbvlvZXouqvku73lt7Lov4fmnJ/vvIzor7fph43mlrDnmbvlvZUnLCAn57O757uf5o+Q56S6JywgewogICAgICBjb25maXJtQnV0dG9uVGV4dDogJ+mHjeaWsOeZu+W9lScsCiAgICAgIGNhbmNlbEJ1dHRvblRleHQ6ICflj5bmtognLAogICAgICB0eXBlOiAnd2FybmluZycKICAgIH0pLnRoZW4oZnVuY3Rpb24gKCkgewogICAgICBzdG9yZS5kaXNwYXRjaCgndXNlci9sb2dvdXQnKS50aGVuKGZ1bmN0aW9uICgpIHsKICAgICAgICAvLyDot7PovazliLDnmbvlvZXpobXpnaLph43mlrDnmbvlvZUKICAgICAgICBsb2NhdGlvbi5yZWxvYWQoKTsKICAgICAgfSk7CiAgICB9KTsKICB9IGVsc2UgaWYgKHJlcy5jb2RlID09PSA1MDApIHsKICAgIE5vdGlmaWNhdGlvbi5lcnJvcih7CiAgICAgIHRpdGxlOiAn5pyN5Yqh5Zmo5YaF6YOo5Ye6546w5byC5bi477yM6K+36IGU57O7566h55CG5ZGYJwogICAgfSk7CiAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoJ2Vycm9yJyk7IC8vIOiusOW9lemUmeivrwogIH0gZWxzZSBpZiAocmVzLmNvZGUgIT09IDIwMCkgewogICAgLy8g5Y+v6IO95piv5YW25LuW5Y+C5pWw5Ye66ZSZCiAgICBOb3RpZmljYXRpb24uZXJyb3IoewogICAgICB0aXRsZTogcmVzLm1zZwogICAgfSk7CiAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoJ2Vycm9yJyk7IC8vIOiusOW9lemUmeivrwogIH0gZWxzZSB7CiAgICAvLyDku6XkuIrpqozor4HpgJrov4fkuYvlkI7mlL7ooYwKICAgIHJldHVybiByZXM7CiAgfSAvLyDlpoLmnpzlk43lupTnmoRjb2Rl5YC85LiN5pivMjAw77yM6YKj5LmI5bCx5Yik5Yir5Li65LiA5LiqZXJyb3IKICAvLyBpZiAocmVzLmNvZGUgIT09IDIwMCkgewogIC8vICAgTWVzc2FnZSh7CiAgLy8gICAgIG1lc3NhZ2U6IHJlcy5tZXNzYWdlIHx8ICdFcnJvcicsCiAgLy8gICAgIHR5cGU6ICdlcnJvcicsCiAgLy8gICAgIGR1cmF0aW9uOiA1ICogMTAwMAogIC8vICAgfSkKICAvLwogIC8vICAgLy8gNTAwMDg6IElsbGVnYWwgdG9rZW47IDUwMDEyOiBPdGhlciBjbGllbnRzIGxvZ2dlZCBpbjsgNTAwMTQ6IFRva2VuIGV4cGlyZWQ7CiAgLy8gICBpZiAocmVzLmNvZGUgPT09IDUwMDA4IHx8IHJlcy5jb2RlID09PSA1MDAxMiB8fCByZXMuY29kZSA9PT0gNTAwMTQpIHsKICAvLyAgICAgLy8gdG8gcmUtbG9naW4KICAvLyAgICAgTWVzc2FnZUJveC5jb25maXJtKCdZb3UgaGF2ZSBiZWVuIGxvZ2dlZCBvdXQsIHlvdSBjYW4gY2FuY2VsIHRvIHN0YXkgb24gdGhpcyBwYWdlLCBvciBsb2cgaW4gYWdhaW4nLCAnQ29uZmlybSBsb2dvdXQnLCB7CiAgLy8gICAgICAgY29uZmlybUJ1dHRvblRleHQ6ICdSZS1Mb2dpbicsCiAgLy8gICAgICAgY2FuY2VsQnV0dG9uVGV4dDogJ0NhbmNlbCcsCiAgLy8gICAgICAgdHlwZTogJ3dhcm5pbmcnCiAgLy8gICAgIH0pLnRoZW4oKCkgPT4gewogIC8vICAgICAgIHN0b3JlLmRpc3BhdGNoKCd1c2VyL3Jlc2V0VG9rZW4nKS50aGVuKCgpID0+IHsKICAvLyAgICAgICAgIGxvY2F0aW9uLnJlbG9hZCgpCiAgLy8gICAgICAgfSkKICAvLyAgICAgfSkKICAvLyAgIH0KICAvLyAgIHJldHVybiBQcm9taXNlLnJlamVjdChuZXcgRXJyb3IocmVzLm1lc3NhZ2UgfHwgJ0Vycm9yJykpCiAgLy8gfSBlbHNlIHsKICAvLyAgIHJldHVybiByZXMKICAvLyB9Cgp9LCBmdW5jdGlvbiAoZXJyb3IpIHsKICBjb25zb2xlLmxvZygnZXJyJyArIGVycm9yKTsgLy8gZm9yIGRlYnVnCgogIE1lc3NhZ2UoewogICAgbWVzc2FnZTogZXJyb3IubWVzc2FnZSwKICAgIHR5cGU6ICdlcnJvcicsCiAgICBkdXJhdGlvbjogNSAqIDEwMDAKICB9KTsKICByZXR1cm4gUHJvbWlzZS5yZWplY3QoZXJyb3IpOwp9KTsKZXhwb3J0IGRlZmF1bHQgc2VydmljZTs="},{"version":3,"sources":["G:/IdeaProjects/LastTerminal/Front/online-hospital-ui/src/utils/request.js"],"names":["axios","MessageBox","Message","store","getToken","service","create","baseURL","process","env","VUE_APP_BASE_API","timeout","interceptors","request","use","config","getters","token","headers","error","console","log","Promise","reject","response","res","data","code","confirm","confirmButtonText","cancelButtonText","type","then","dispatch","location","reload","Notification","title","msg","message","duration"],"mappings":"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","sourcesContent":["import axios from 'axios'\nimport { MessageBox, Message } from 'element-ui'\nimport store from '@/store'\nimport { getToken } from '@/utils/auth'\n\n// 创建一个axios实例\nconst service = axios.create({\n  baseURL: process.env.VUE_APP_BASE_API, // 实际发送的URL=baseURL  +  请求配置的url  （baseURL当前就是/dev-api\n  // withCredentials: true, // send cookies when cross-domain requests\n  timeout: 5000 // 设置请求超时时间\n})\n\n// 请求拦截器\nservice.interceptors.request.use(\n  config => {\n    // 在发送请求之前做的事情\n    if (store.getters.token) {\n      // 让每一个请求中都携带token\n      // 【‘X-Token’】是一个自定义的header中的key\n      // 可以根据实际情况改变它\n      // 这里的token名称要和后端保持一致\n      config.headers['token'] = getToken()\n    }\n    return config\n  },\n  error => {\n    // 当请求出现问题时所做的一些事情\n    console.log(error) // for debug\n    return Promise.reject(error)\n  }\n)\n\n// 响应拦截器\nservice.interceptors.response.use(\n  /**\n   * 如果你想要得到诸如请求头或者状态的http信息\n   * 请返回  response => response\n   */\n  /**\n   * 通过自定义码来决定请求状态\n   * 这里仅仅是一个例子\n   * 你同样也可以根据http的状态码来决定这个状态\n   * @param response\n   * @returns {any|Promise<AxiosResponse<any>>}\n   */\n  response => {\n    /**\n     * 项目中存在的状态码\n     * 400：参数存在问题\n     * 401：未授权\n     * 500：系统内部错误\n     * 200：操作成功\n     */\n    const res = response.data // response.data才是后台返回给我们的数据\n    if (res.code === 401) {\n      // 未授权，身份过期  一个弹出框\n      MessageBox.confirm('用户登录身份已过期，请重新登录', '系统提示', {\n        confirmButtonText: '重新登录',\n        cancelButtonText: '取消',\n        type: 'warning'\n      }).then(() => {\n        store.dispatch('user/logout').then(() => { // 跳转到登录页面重新登录\n          location.reload()\n        })\n      })\n    } else if (res.code === 500) {\n      Notification.error({\n        title: '服务器内部出现异常，请联系管理员'\n      })\n      return Promise.reject('error') // 记录错误\n    } else if (res.code !== 200) { // 可能是其他参数出错\n      Notification.error({\n        title: res.msg\n      })\n      return Promise.reject('error') // 记录错误\n    } else {\n      // 以上验证通过之后放行\n      return res\n    }\n    // 如果响应的code值不是200，那么就判别为一个error\n    // if (res.code !== 200) {\n    //   Message({\n    //     message: res.message || 'Error',\n    //     type: 'error',\n    //     duration: 5 * 1000\n    //   })\n    //\n    //   // 50008: Illegal token; 50012: Other clients logged in; 50014: Token expired;\n    //   if (res.code === 50008 || res.code === 50012 || res.code === 50014) {\n    //     // to re-login\n    //     MessageBox.confirm('You have been logged out, you can cancel to stay on this page, or log in again', 'Confirm logout', {\n    //       confirmButtonText: 'Re-Login',\n    //       cancelButtonText: 'Cancel',\n    //       type: 'warning'\n    //     }).then(() => {\n    //       store.dispatch('user/resetToken').then(() => {\n    //         location.reload()\n    //       })\n    //     })\n    //   }\n    //   return Promise.reject(new Error(res.message || 'Error'))\n    // } else {\n    //   return res\n    // }\n  },\n  error => {\n    console.log('err' + error) // for debug\n    Message({\n      message: error.message,\n      type: 'error',\n      duration: 5 * 1000\n    })\n    return Promise.reject(error)\n  }\n)\n\nexport default service\n"]}]}